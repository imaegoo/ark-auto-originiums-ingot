原视频地址: https://www.bilibili.com/video/BV13F411i7a1

原作者: 酱油菌kun

本存储库仅用于记录自己的修改

```
再录这一段视频也是因为实在是好多人评论和私信问几乎相同的问题  
而我一个人14日那天光回复信息就已经回复了一整天了，  
其他什么事情都没做好。  
后续有什么问题我应该会直接把这个视频发给评论或私信的人，还有今天修改完应该就不会再修改了，问题应该是一直修不完了的，请见谅。  
实在不行，我在自己的视频下面看到有其他up的作品了，虽然开发的工具不同但效果应该也差不多，也有一位已经自己开发了工具的up“拖鞋腾”在评论里给过我建议，那个up的工具可以在手机上进行。  
还有请大家善待每一个开源的小伙伴，谢谢了。

15日相对14日而言的更新：  

0、这次的源码已经加了很多注释了。  
1、不期而遇和幕间余兴的问题，现在扫描重复2次不行就会直接点击坐标位置来选择关卡。  
2、摆放干员的速度减缓了，防止大家说的卡摆不了干员或者开不了技能之类的。  
3、商店投资没源石锭了还没触发“投资受限”，现在设置了上限次数。  
4、第二轮开始卡住，现在结算时等待的时间延长了。  
15日18:30更新链接（由于动作没跟上思想，忘记把不期而遇扫描失败两次，判断去点击固定坐标位置后的代码改成对象shijian()，导致了评论里说的不期而遇选后不会进关卡的问题）：  
15日晚11点修复了18:30更新时又新出现的逻辑BUG。  

记得看置顶评论。  

不修改了，摆烂了，折腾的太久了，估计越改越多新BUG，大家凑合能用就用吧，出错了就重新运行一下。（把代码最下面while语句上面的“kaishi()#脚本从这里开始运行”这行代码用井号#放最前面，注释掉再运行，就能从循环判断关卡开始运行了）

15日晚上11点更新：
1、不期而遇和幕间余兴的问题，现在扫描重复2次不行就会直接点击坐标位置来选择关卡之后，会再进行一次对文字的识别
识别的文字有“不期而遇”“幕间余兴”和“诡异行商”。

15日相对14日而言的更新：
1、不期而遇和幕间余兴的问题，现在扫描重复2次不行就会直接点击坐标位置来选择关卡。
2、摆放干员的速度减缓了，防止大家说的卡摆不了干员或者开不了技能之类的。
3、商店投资没源石锭了还没触发“投资受限”，现在设置了上限次数。
4、第二轮开始卡住，现在结算时等待的时间延长了。

这次弄完应该就不会修改更新了，回复评论私信和修改代码+测试一下子就过了两天了，实在是太消耗现实生活的时间了，多多包涵，请见谅，谢谢。

问题：
0、担心账号问题请勿使用
Airtest是网易公开出来的一个自动化测试的集成开发环境，主要是使用了图像识别和模拟点击。
下面这个视频也能看到手机厂商内部也会用更高级的自动化测试工具进行测试。
https://www.bilibili.com/video/BV1KR4y1s7b5?spm_id_from=333.999.0.0

1、airtest下载地址
https://airtest.netease.com/

2、源码文件在airtest里打开的方法
在airtest里面，左上角点文件→打开脚本→选择解压后的 文件夹里面的 后缀是.py的文件 。

3、airtest链接模拟器的问题
airtest链接模拟器的问题
airtest链接模拟器的问题（说三遍）：
请在详细查阅了官方文档的链接教程，并且按照操作指引进行，还是没办法链接后，再在评论里问问题。
其实我也解决不了模拟器链接的问题，因为我也是看官方文档来进行链接操作的，官方文档模拟器链接教程地址
https://airtest.doc.io.netease.com/IDEdocs/3.2device_connection/2_emulator_connection/

4、运行的需求
一、是模拟器的分辨率 1440*810。（实测雷电模拟器相同分辨率正常运行）
二、是点击运行的界面是在肉鸽的主页面。
三、是要有突击作战分队（近卫先锋干员直接精二那个分队）
四、是自己或者好友有挂精二立绘山就可以，优先点击自己的山。

5、(已改善)不期而遇的问题，目前想到了简单粗暴的解决方法(已经在代码里了)：
这里说下思路，因为判断关卡卡住的原因大概率是不期而遇或幕间余兴，所以设定判断了两次之后，直接点击屏幕中相应可能出现关卡的位置（两条三条四条分支不同的位置坐标），然后判断右边弹出来的大号字体就能继续运行了。

6、(已改善)电脑配置不好，战斗加载慢，容易错过拖动干员或者放技能：
请在代码中，各个对象内设置不同的sleep时间，代码中已经有各种的注释了。
更新后的源码里面拖动干员的过程已经增加到了2秒

7、(已解决)商店投资源石锭用完了，还没出现“投资受限”导致卡住：
已经设置了重复点击的次数上限，达到点击次数后会直接离开放弃探险，这里优先判断“投资受限”再按次数来判断退不退出。

8、(已改善)商店退出来回到主界面傻住不动：
大概率是因为卡，我已经延长了等待时间，由于我本人一直都能顺利通过这个环节，等待时间加长能否解决网友的问题还有待测试，但根据本人在测试过程中的体验，雷电模拟器会比mumu模拟器要卡，这个应该要根据不同人的电脑配置而定，请选择最适合自己电脑的模拟器。
```
